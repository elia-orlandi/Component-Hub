<div class="header-container">
  
  <!-- Logo con link alla home page dell'area protetta -->
  <div class="logo">
    <a routerLink="/components" class="logo-link"><h1>Component Hub</h1></a>
  </div>
  
  <!-- Menu di Navigazione Principale -->
  <!-- La classe `active` Ã¨ controllata dal segnale `isMobileMenuOpen` -->
  <ul class="nav-menu" [class.active]="isMobileMenuOpen()">
    <li>
      <!--
        routerLink: Definisce la destinazione.
        routerLinkActive: Applica automaticamente la classe 'active' quando la rotta corrisponde.
        (click): Chiude il menu mobile se si clicca (utile su mobile).
      -->
      <a routerLink="/components" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMobileMenu()">Libreria</a>
    </li>
    <li>
      <a routerLink="/my-components" routerLinkActive="active" (click)="closeMobileMenu()">I Miei Componenti</a>
    </li>
  </ul>
  
  <!-- Azioni Utente (Desktop) -->
  <div class="user-actions">
    <button class="primary-btn" (click)="onAddComponent()">Aggiungi Componente</button>
    
    <!--
      Integrazione del componente UserProfileMenu.
      - Passiamo i dati necessari tramite binding `[input]`.
      - Ascoltiamo l'evento di output `(logoutClicked)` per chiamare il metodo signOut del servizio.
    -->
    @if (authService.isAuthenticated()) {
      <app-user-profile-menu
        [profile]="authService.profile()"
        [user]="authService.user()"
        (logoutClicked)="authService.signOut()"
      />
    }
  </div>
  
  <!-- Pulsante per il Menu Mobile -->
  <button class="mobile-menu-btn" (click)="toggleMobileMenu()" [class.active]="isMobileMenuOpen()">
    <svg class="hamburger" viewBox="0 0 24 24">
      <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
    </svg>
    <svg class="close" viewBox="0 0 24 24">
      <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    </svg>
  </button>
  
</div>